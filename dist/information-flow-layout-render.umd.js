!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.InformationFlowLayoutRender=e()}(this,function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t,e){return Object.assign({},nt,{width:t-20},e)}function i(t,e){return Object.assign({},ot,e)}var n=function(){function t(){var e=this;this.genStyle=function(e){var i="";if(e){var n=t.pxStyles;for(var o in e)if(e.hasOwnProperty(o)){var r=e[o],a=!!n[o]&&!isNaN(parseFloat(r))&&isFinite(r);i+=o+":"+e[o]+(a?"px;":";")}}return i},this.appendStyle=function(t,i){var n=e.genStyle(i),o=t.style.cssText;t.style.cssText=o+n}}return t.pxStyles={width:1,height:1,"line-height":1,"padding-left":1,"padding-right":1,"padding-top":1,"padding-bottom":1,"border-width":1,"font-size":1,"margin-left":1,"margin-right":1,"margin-top":1,"margin-bottom":1,"border-left-width":1,"border-right-width":1,"border-top-width":1,"border-bottom-width":1,top:1,left:1,bottom:1,right:1},t.getCurrentStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t)[e]:void 0},t}(),o=1,r=5,a=function(){function t(t){var e=t.initData,i=void 0===e?[]:e,n=t.nextPage,a=void 0===n?o:n,c=t.pageShowNum,l=void 0===c?r:c,d=t.mockRemoteLoad,s=void 0!==d&&d,f=t.ajaxFetch;this.loading=!1,this.isEnd=!1,this.page=a,this.mockRemoteLoad=s,this.showNum=l,this.data=i,f&&(this.ajaxFetch=f)}return t.prototype.fetchData=function(t,e){var i=this;if(!this.loading&&!this.isEnd){this.loading=!0;(0,this.ajaxFetch)({page:t,success:function(t){i.loading=!1,i.showNum>t.length&&(i.isEnd=!0),e(t)},fail:function(t){throw i.loading=!1,i.isEnd=!0,t}})}},t.prototype.fetchNext=function(t){if(!this.loading&&!this.isEnd){var e=this.page;this.page=e+1,this.fetchData(e,t)}},t.prototype.mockFetch=function(t,e){var i=this.data,n=this.showNum,o=Math.min((t-1)*n,i.length),r=Math.min(t*n,i.length);r===i.length&&(this.isEnd=!0);var a=i.slice(o,r);a.length&&e(a)},t.prototype.mockFetchNext=function(t){if(!this.isEnd){var e=this.page;this.page=e+1,this.mockFetch(e,t)}},t.prototype.getInit=function(t){this.mockRemoteLoad?this.mockFetch(1,t):t(this.data)},t.prototype.getNext=function(t){this.mockRemoteLoad?this.mockFetchNext(t):this.fetchNext(t)},t}(),c=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),l=t(function(t){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)}),d=function(t){return"object"==typeof t?null!==t:"function"==typeof t},s=function(t){if(!d(t))throw TypeError(t+" is not an object!");return t},f=function(t){try{return!!t()}catch(t){return!0}},p=!f(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),u=c.document,h=d(u)&&d(u.createElement),g=function(t){return h?u.createElement(t):{}},m=!p&&!f(function(){return 7!=Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a}),y=function(t,e){if(!d(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!d(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!d(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!d(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},v=Object.defineProperty,b={f:p?Object.defineProperty:function(t,e,i){if(s(t),e=y(e,!0),s(i),m)try{return v(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},x=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},w=p?function(t,e,i){return b.f(t,e,x(1,i))}:function(t,e,i){return t[e]=i,t},C={}.hasOwnProperty,S=function(t,e){return C.call(t,e)},O=0,T=Math.random(),k=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++O+T).toString(36))},j=t(function(t){var e=k("src"),i=Function.toString,n=(""+i).split("toString");l.inspectSource=function(t){return i.call(t)},(t.exports=function(t,i,o,r){var a="function"==typeof o;a&&(S(o,"name")||w(o,"name",i)),t[i]!==o&&(a&&(S(o,e)||w(o,e,t[i]?""+t[i]:n.join(String(i)))),t===c?t[i]=o:r?t[i]?t[i]=o:w(t,i,o):(delete t[i],w(t,i,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||i.call(this)})}),D=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},E=function(t,e,i){if(D(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)}}return function(){return t.apply(e,arguments)}},I=function(t,e,i){var n,o,r,a,d=t&I.F,s=t&I.G,f=t&I.S,p=t&I.P,u=t&I.B,h=s?c:f?c[e]||(c[e]={}):(c[e]||{}).prototype,g=s?l:l[e]||(l[e]={}),m=g.prototype||(g.prototype={});s&&(i=e);for(n in i)r=((o=!d&&h&&void 0!==h[n])?h:i)[n],a=u&&o?E(r,c):p&&"function"==typeof r?E(Function.call,r):r,h&&j(h,n,r,t&I.U),g[n]!=r&&w(g,n,a),p&&m[n]!=r&&(m[n]=r)};c.core=l,I.F=1,I.G=2,I.S=4,I.P=8,I.B=16,I.W=32,I.U=64,I.R=128;var _=I,W={}.toString,M=function(t){return W.call(t).slice(8,-1)},F=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==M(t)?t.split(""):Object(t)},H=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},z=function(t){return F(H(t))},L=Math.ceil,N=Math.floor,P=function(t){return isNaN(t=+t)?0:(t>0?N:L)(t)},R=Math.min,A=function(t){return t>0?R(P(t),9007199254740991):0},B=Math.max,G=Math.min,U=function(t,e){return(t=P(t))<0?B(t+e,0):G(t,e)},X=c["__core-js_shared__"]||(c["__core-js_shared__"]={}),q=function(t){return X[t]||(X[t]={})}("keys"),J=function(t){return function(e,i,n){var o,r=z(e),a=A(r.length),c=U(n,a);if(t&&i!=i){for(;a>c;)if((o=r[c++])!=o)return!0}else for(;a>c;c++)if((t||c in r)&&r[c]===i)return t||c||0;return!t&&-1}}(!1),K=function(t){return q[t]||(q[t]=k(t))}("IE_PROTO"),Q=function(t,e){var i,n=z(t),o=0,r=[];for(i in n)i!=K&&S(n,i)&&r.push(i);for(;e.length>o;)S(n,i=e[o++])&&(~J(r,i)||r.push(i));return r},V="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Y=Object.keys||function(t){return Q(t,V)},Z={f:Object.getOwnPropertySymbols},$={f:{}.propertyIsEnumerable},tt=function(t){return Object(H(t))},et=Object.assign,it=!et||f(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=et({},t)[i]||Object.keys(et({},e)).join("")!=n})?function(t,e){for(var i=tt(t),n=arguments.length,o=1,r=Z.f,a=$.f;n>o;)for(var c,l=F(arguments[o++]),d=r?Y(l).concat(r(l)):Y(l),s=d.length,f=0;s>f;)a.call(l,c=d[f++])&&(i[c]=l[c]);return i}:et;_(_.S+_.F,"Object",{assign:it});var nt={"line-height":0,"background-color":"#eee",padding:"",margin:"8px 0px 0px 10px",border:"",left:10,height:1,top:0,position:"",display:"block"},ot={width:"",height:12,display:"inline-block",position:"","background-color":"#fff",overflow:"hidden","text-decoration":"none","font-size":12,color:"#999","font-family":"Arial, Helvetica, sans-serif","text-align":"left","line-height":12,"text-overflow":"ellipsis","o-text-overflow":"ellipsis",padding:"",border:""},rt={display:"block",position:"","line-height":"100%","text-align":"left"},at={top:0,left:0,width:"",height:"",display:"inline-block",position:"","font-size":12,color:"#999","font-family":"Arial, Helvetica, sans-serif","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis","o-text-overflow":"ellipsis","margin-right":"8px"},ct={configWrapCreate:function(t,e){return Object.assign({},rt,e)},configItemCreate:function(t,e){return Object.assign({},at,e)}},lt={top:0,left:0,height:"auto",display:"block",position:"","background-color":"#fff",overflow:"hidden","text-decoration":"none"},dt={top:0,left:10,height:"auto",display:"block",position:"","font-size":18,color:"#000","font-family":"Arial, Helvetica, sans-serif","text-align":"left","line-height":"auto",overflow:"hidden","text-overflow":"ellipsis","o-text-overflow":"ellipsis","text-decoration":"none",padding:"",margin:"10px 0px 0px 10px",border:""},st={top:0,left:10,display:"block",position:"","background-size":"cover",overflow:"hidden",border:"",margin:"5px 0px 0px 10px",padding:""},ft={configWrapCreate:function(t,e){return Object.assign({},lt,{width:t},e)},configTitleContainerCreate:function(t,e){return Object.assign({},dt,{width:t-20},e)},configImgContainerCreate:function(t,e){var i=t-20;return Object.assign({},st,{width:i,height:1*i/2.3},e)}},pt={top:0,left:0,display:"block",position:"","background-color":"#fff",overflow:"hidden","text-decoration":"none"},ut={top:15,left:10,display:"inline-block",position:"",border:"",margin:"15px 0px 0px 10px",padding:"","vertical-align":"top"},ht={top:15,display:"inline-block",position:"",border:"",margin:"15px 0px 0px 10px",padding:"","line-height":"100%","vertical-align":"top"},gt={top:18,display:"inline-block",position:"","font-size":18,color:"#000","font-family":"Arial, Helvetica, sans-serif","text-align":"left","line-height":20},mt={configWrapCreate:function(t,e){return Object.assign({},pt,{width:t},e)},configImgCreate:function(t,e){var i=100*t/320;return Object.assign({},ut,{width:i,height:33*i/50},e)},configRightCreate:function(t,e){var i=100*t/320;return Object.assign({},ht,{left:i+20,width:t-30-i},e)},configTitleWrapCreate:function(t,e){var i=100*t/320;return Object.assign({},gt,{left:i+20,width:t-30-i},e)},configTitleCreate:function(t,e){var i=100*t/320;return Object.assign({},gt,{width:t-30-i},e)}},yt={top:0,left:0,height:"auto",display:"block",position:"","background-color":"#fff",overflow:"hidden","text-decoration":"none"},vt={top:0,left:10,height:"auto",display:"block",position:"","font-size":18,color:"#000","font-family":"Arial, Helvetica, sans-serif","text-align":"left","line-height":20,overflow:"hidden","-webkit-line-clamp":"2","text-overflow":"ellipsis","o-text-overflow":"ellipsis","text-decoration":"none",padding:"",margin:"15px 10px 0px",border:""},bt={top:5,left:10,display:"inline-block",position:"",padding:"",margin:"5px 0px 10px 10px",border:""},xt={configWrapCreate:function(t,e){return Object.assign({},yt,{width:t},e)},configTitleCreate:function(t,e){return Object.assign({},vt,{width:t-20},e)},configImgItemCreate:function(t,e,i){void 0===i&&(i=3);var n=(t-20-2*i)/i;return Object.assign({},bt,{width:n,height:66*n/98},e)}},wt={top:0,left:0,height:15,"line-height":15,"font-size":12,display:"block",position:"","background-color":"#eee",color:"#888",overflow:"hidden","text-align":"center"},Ct={configWrapCreate:function(t,e){return Object.assign({},wt,e)}},St={top:0,left:0,height:30,"line-height":30,display:"block",position:"relative","background-color":"#fff",margin:"15px 0px 0px 10px",overflow:"visible","z-index":"-1","border-bottom":"2px solid #dddddd"},Ot={top:0,left:0,height:30,width:70,"line-height":30,"font-size":16,position:"relative",color:"#888",overflow:"hidden","text-align":"left","border-bottom":"2px solid #4280db"},Tt={configWrapCreate:function(t,e){return Object.assign({},St,{width:t-15},e)},configTitleCreate:function(t,e){return Object.assign({},Ot,e)}},kt=new n;return function(){function t(t){document.body&&document.body.clientWidth?this.winWidth=document.body&&document.body.clientWidth:this.winWidth=window.innerWidth,this.loadObj=new a(t)}return t.prototype.init=function(t,e,i){var n=this;void 0===e&&(e={});var o,r=document.body;if(t&&"string"==typeof t?o=document.getElementById(t)||r:"object"==typeof t&&t instanceof HTMLElement&&(o=t),o){var a=this.createHeader();o.appendChild(a);var c=this.loadObj;this.statisticOption=i,c.getInit(function(e){return n.render(t,e,c.isEnd)}),e.scroll&&this.watchScroll(e.dom,e.onEndReachedThreshold,function(e){return n.render(t,e,c.isEnd)})}},t.prototype.render=function(e,i,n){var o,r=this,a=document.body,c=document.createDocumentFragment();if(e&&"string"==typeof e?o=document.getElementById(e)||a:"object"==typeof e&&e instanceof HTMLElement&&(o=e),o){var l=t.layoutType.BIG_IMG,d=t.layoutType.IMG_TEXT,s=t.layoutType.IMGS;i.forEach(function(t){switch(t.stype){case l:r.renderBigImgItem(c,t);break;case d:r.renderImgTextItem(c,t);break;case s:r.renderImgsItem(c,t);break;default:return}});var f=this.createFooter(n);c.appendChild(f),o.appendChild(c)}},t.prototype.watchScroll=function(t,e,i){void 0===e&&(e=50);var n=this.loadObj,o=document.body;t&&"string"==typeof t?o=document.getElementById(t)||document.body:"object"==typeof t&&t instanceof HTMLElement&&(o=t);var r=o.clientHeight;o.onscroll=function(t){o.scrollHeight-o.scrollTop-r<=e&&n.getNext(i)}},t.prototype.buildDom=function(t,e,i){void 0===e&&(e={});var n=document.createElement(t);for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);if(i){var r=i();kt.appendStyle(n,r)}return n},t.prototype.renderBigImgItem=function(e,i){var n=this,o=i.title,r=i.curl,a=i.imageUrl,c=i.target,l=i.type,d=i.src,s=i.desc,f=i.time,p=i.sxinitemid;if(a){var u=this.winWidth,h=this.buildDom("a",{href:r,target:c||"_self",title:o,onclick:function(t){if(n.statisticOption)return n.addStatisticsScript(n.statisticOption.sxinid,p),setTimeout(function(){window.open(r,c||"_self")},n.statisticOption.delay||100||100),!1}},function(){return ft.configWrapCreate(u)}),g=this.buildDom("span",{innerHTML:o},function(){return ft.configTitleContainerCreate(u)});h.appendChild(g);var m=this.buildDom("div",{},function(){return ft.configImgContainerCreate(u)});if(m.style.background="url("+a+") center center no-repeat",m.style.backgroundSize="cover",h.appendChild(m),l===t.remarkType.SHOW_DESC&&s){var y=this.createDescDom(s,10,10);h.appendChild(y)}else if(l===t.remarkType.SHOW_SRC_TIME&&d&&f){var v=this.createSrcAndTimeDom(d,f,10,10,20);h.appendChild(v)}var b=this.createLineDom(0,"");return h.appendChild(b),e.appendChild(h),e}},t.prototype.renderImgTextItem=function(e,i){var n=this,o=i.title,r=i.curl,a=i.imageUrl,c=i.target,l=i.type,d=i.src,s=i.time,f=i.desc,p=i.sxinitemid;if(a){var u=this.winWidth,h=this.buildDom("a",{href:r,target:c||"_self",title:o,onclick:function(t){if(n.statisticOption)return n.addStatisticsScript(n.statisticOption.sxinid,p),setTimeout(function(){window.open(r,c||"_self")},n.statisticOption.delay||100),!1}},function(){return mt.configWrapCreate(u)}),g=this.buildDom("div",{},function(){return mt.configImgCreate(u)});g.style.background="url("+a+") center center no-repeat",g.style.backgroundSize="cover",h.appendChild(g);var m=this.buildDom("div",{},function(){return mt.configRightCreate(u)}),y=this.buildDom("div",{},function(){return mt.configTitleWrapCreate(u)}),v=this.buildDom("span",{innerText:o},function(){return mt.configTitleCreate(u)});if(y.appendChild(v),m.appendChild(y),l===t.remarkType.SHOW_DESC&&f){var b=this.createDescDom(f,10,0);m.appendChild(b)}else if(l===t.remarkType.SHOW_SRC_TIME&&d&&s){var x=this.createSrcAndTimeDom(d,s,5,0,20);m.appendChild(x)}h.appendChild(m);var w=this.createLineDom(13,"");return h.appendChild(w),e.appendChild(h),e}},t.prototype.renderImgsItem=function(e,i){var n=this,o=i.title,r=i.curl,a=i.images,c=i.target,l=i.desc,d=i.src,s=i.time,f=i.type,p=i.sxinitemid;if(a&&0!==a.length){var u=this.winWidth,h=this.buildDom("a",{href:r,target:c||"_self",title:o,onclick:function(t){if(n.statisticOption)return n.addStatisticsScript(n.statisticOption.sxinid,p),setTimeout(function(){window.open(r,c||"_self")},n.statisticOption.delay||100||100),!1}},function(){return xt.configWrapCreate(u)}),g=this.buildDom("span",{innerText:o},function(){return xt.configTitleCreate(u)});h.appendChild(g);for(var m=a.length,y=this,v=0;v<m;v++)!function(t){var e=a[t],i={};0!==t&&(i["margin-left"]="3px");var n=y.buildDom("div",{},function(){return xt.configImgItemCreate(u,i,m)});n.style.background="url("+e+") center center no-repeat",n.style.backgroundSize="cover",h.appendChild(n)}(v);if(f===t.remarkType.SHOW_DESC&&l){var b=this.createDescDom(l,0,10);h.appendChild(b)}else if(f===t.remarkType.SHOW_SRC_TIME&&d&&s){var x=this.createSrcAndTimeDom(d,s,0,10,20);h.appendChild(x)}var w=this.createLineDom(0,"");return h.appendChild(w),e.appendChild(h),e}},t.prototype.createLineDom=function(t,i){var n=this;return this.buildDom("div",{},function(){return e(n.winWidth,{top:t,position:i})})},t.prototype.createDescDom=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var o=document.createElement("div");if(!t)return o;o.innerText=t;var r=i(this.winWidth,{top:e,left:n,"margin-top":e,"margin-left":n});return kt.appendStyle(o,r),o},t.prototype.createSrcAndTimeDom=function(t,e,i,n,o){var r=document.createElement("div");if(!t||!e)return r;var a={top:i,left:n,height:o,"margin-left":n,"margin-top":i},c=ct.configWrapCreate(this.winWidth,a);kt.appendStyle(r,c);var l=document.createElement("div"),d=ct.configItemCreate(this.winWidth,{"line-height":o});l.innerText=t,kt.appendStyle(l,d);var s=document.createElement("div");return s.innerText=e,kt.appendStyle(s,d),r.appendChild(l),r.appendChild(s),r},t.prototype.createHeader=function(){var t=this;this.headerDom=this.buildDom("div",{},function(){return Tt.configWrapCreate(t.winWidth)});var e=this.buildDom("div",{},function(){return Tt.configTitleCreate(t.winWidth)});return e.innerText="猜你喜欢",this.headerDom.appendChild(e),this.headerDom},t.prototype.createFooter=function(t){var e=this;this.footerDom||(this.footerDom=this.buildDom("div",{},function(){return Ct.configWrapCreate(e.winWidth)}));var i=this.footerDom,n=t?"-- 加载完成 --":"加载更多...";return i.innerText!==n&&(i.innerText=n),i},t.prototype.addStatisticsScript=function(t,e){var i=document.createElement("script");i.type="text/javascript",document.body.insertBefore(i,document.body.children.item(0))},t.layoutType={BIG_IMG:0,IMG_TEXT:1,IMGS:2},t.remarkType={SHOW_DESC:0,SHOW_SRC_TIME:1},t}()});
//# sourceMappingURL=information-flow-layout-render.umd.js.map
